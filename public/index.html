<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarans dreamFarm2</title>
    <link rel="stylesheet" href="index.css">
</head>


<body>

    <button id="openModalButton">Open Login Modal</button>

    <div id="loginModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Login</h2>
            Name: <input type="text" id="name"><br>
            Email: <input type="text" id="email"><br>
            Password: <input type="password" id="password"><br>
            <button id="createUserButton">Create User</button>
        </div>
    </div>

    <script>

document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById("openModalButton");
    const modal = document.getElementById("loginModal");
    const span = document.getElementsByClassName("close")[0];

    btn.onclick = () => modal.style.display = "block";
    span.onclick = () => modal.style.display = "none";
    window.onclick = event => {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    // Handle user creation
    document.getElementById("createUserButton").addEventListener("click", async () => {
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        const response = await fetch('/user', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ name, email, password })
        });

        if (response.ok) {
            console.log("User created successfully");
            modal.style.display = "none";
        } else {
            console.error("Failed to create user");
        }
    });
});
</script>


</body>

</html>